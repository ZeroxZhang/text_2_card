<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minimalism Note Card Generator</title>
    <!-- æ·»åŠ å­—ä½“é“¾æ¥ -->
    <link href="https://fonts.googleapis.com/css2?family=Courier+Prime&family=Noto+Serif+SC:wght@400;500;600&display=swap" rel="stylesheet">
    <!-- æ·»åŠ html2canvasåº“ç”¨äºå›¾ç‰‡å¯¼å‡º -->
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
      <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-1FSFSSNCQ5"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
        
          gtag('config', 'G-1FSFSSNCQ5');
        </script>
    <style>
        :root {
            /* Default theme (Light) - å¢åŠ æ¸å˜ */
            --bg-primary: #f5f5f7;
            --bg-card: rgba(255, 255, 255, 0.85);
            --text-primary: #1d1d1f;
            --text-secondary: #86868b;
            --accent-color: #0071e3;
            --shadow-color: rgba(0, 0, 0, 0.1);
            --border-color: rgba(0, 0, 0, 0.06);
            --card-gradient: linear-gradient(145deg, rgba(255, 255, 255, 0.95), rgba(245, 245, 250, 0.8), rgba(240, 240, 255, 0.7));
            --footer-bg: #333333;
            --footer-text: #b0b0b0;
            
            /* Typography */
            --font-primary: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            --font-en: 'Courier Prime', monospace;
            --font-cn: 'Noto Serif SC', serif;
            --font-size-base: 16px;
            --line-height: 1.6;
            
            /* ä¼˜åŒ–å¡ç‰‡æ–‡å­—æ’ç‰ˆå˜é‡ */
            --card-font-size: 0.95rem;      /* ç•¥å¾®å°ä¸€ç‚¹çš„å­—ä½“å¤§å° */
            --card-letter-spacing: 0.02em;  /* å­—é—´è·ç•¥å¾®å¢åŠ  */
            --card-line-height: 1.85;       /* è¡Œé—´è·ç•¥å¾®å¢åŠ  */
            --paragraph-indent: 2em;        /* æ®µè½é¦–è¡Œç¼©è¿› */
            
            /* Spacing */
            --spacing-xs: 0.5rem;
            --spacing-sm: 1rem;
            --spacing-md: 1.5rem;
            --spacing-lg: 2rem;
            --spacing-xl: 3rem;
            
            /* Animation */
            --transition-speed: 0.3s;
        }

        [data-theme="dark"] {
            --bg-primary: #000000;
            --bg-card: rgba(30, 30, 32, 0.85);
            --text-primary: #f5f5f7;
            --text-secondary: #a1a1a6;
            --accent-color: #2997ff;
            --shadow-color: rgba(0, 0, 0, 0.3);
            --border-color: rgba(255, 255, 255, 0.1);
            --card-gradient: linear-gradient(145deg, rgba(40, 40, 45, 0.9), rgba(28, 28, 30, 0.7));
            --footer-bg: #1a1a1a;
            --footer-text: #8c8c8c;
        }

        [data-theme="warm"] {
            --bg-primary: #fbf7f2;
            --bg-card: rgba(255, 250, 245, 0.85);
            --text-primary: #3a2618;
            --text-secondary: #8d7966;
            --accent-color: #c87941;
            --shadow-color: rgba(138, 100, 75, 0.1);
            --border-color: rgba(138, 100, 75, 0.08);
            --card-gradient: linear-gradient(145deg, rgba(255, 246, 235, 0.9), rgba(252, 240, 228, 0.7));
            --footer-bg: #3a2618;
            --footer-text: #d5c5b5;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-primary);
            font-size: var(--font-size-base);
            line-height: var(--line-height);
            background-color: var(--bg-primary);
            color: var(--text-primary);
            transition: background-color var(--transition-speed) ease, color var(--transition-speed) ease;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            padding: 0;
        }

        .main-wrapper {
            flex: 1 0 auto;
            padding: var(--spacing-md);
        }

        .container {
            width: 100%;
            max-width: 1200px; /* å¢å¤§æœ€å¤§å®½åº¦ä»¥é€‚åº”åˆ†å± */
            margin: 0 auto;
            padding: var(--spacing-md);
        }

        /* é¡¶éƒ¨å¯¼èˆªæ  - æ–°å¢ */
        .top-nav {
            background-color: var(--bg-card);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border-color);
            padding: var(--spacing-xs) var(--spacing-md);
            position: sticky;
            top: 0;
            z-index: 100;
            display: flex;
            justify-content: space-between; /* æ”¹ä¸ºä¸¤ç«¯å¯¹é½ */
            align-items: center;
        }

        /* å·¦ä¾§Logo - æ–°å¢ */
        .site-logo {
            font-size: 1.5rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .site-logo .emoji {
            font-size: 1.8rem; /* ç•¥å¤§äºæ–‡æœ¬ */
            line-height: 1;
        }

        /* è¯­è¨€åˆ‡æ¢æŒ‰é’® - æ–°å¢ */
        .language-selector {
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            font-size: 0.9rem;
        }

        .language-selector span {
            color: var(--text-secondary);
        }

        .language-selector select {
            background-color: transparent;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 2px 6px;
            color: var(--text-primary);
            font-family: var(--font-primary);
            font-size: 0.9rem;
        }

        .language-selector select:focus {
            outline: none;
            border-color: var(--accent-color);
        }

        .header {
            text-align: center;
            margin-bottom: var(--spacing-lg);
        }

        .header h1 {
            font-size: 2rem;
            font-weight: 600;
            margin-bottom: var(--spacing-xs);
        }

        .header p {
            color: var(--text-secondary);
        }

        .theme-switcher {
            display: flex;
            justify-content: center;
            margin-bottom: var(--spacing-md);
            gap: var(--spacing-sm);
        }

        .theme-button {
            background: none;
            border: 1px solid var(--border-color);
            border-radius: 20px;
            padding: 0.4rem 1rem;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all var(--transition-speed) ease;
            color: var(--text-secondary);
        }

        .theme-button:hover, .theme-button.active {
            background-color: var(--accent-color);
            color: white;
            border-color: var(--accent-color);
            transform: translateY(-2px);
        }

        /* é‡æ–°è®¾è®¡ä¸»è¦å†…å®¹å¸ƒå±€ä¸ºåˆ†å± */
        .main-content {
            display: flex;
            flex-direction: row;
            gap: var(--spacing-lg);
            margin-top: var(--spacing-lg);
        }

        /* å·¦ä¾§è¾“å…¥åŒºåŸŸ */
        .input-section {
            flex: 1;
            min-width: 0;
        }

        .input-form {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-md);
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-xs);
        }

        .input-group label {
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .input-field {
            padding: var(--spacing-sm);
            border-radius: 10px;
            border: 1px solid var(--border-color);
            background-color: var(--bg-card);
            color: var(--text-primary);
            font-family: var(--font-primary);
            transition: all var(--transition-speed) ease;
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
        }

        .input-field:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 2px rgba(var(--accent-color-rgb, 0, 113, 227), 0.3);
        }

        textarea.input-field {
            min-height: 250px;
            resize: vertical;
        }

        .submit-button {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: var(--spacing-sm);
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-speed) ease;
            margin-top: var(--spacing-xs);
        }

        .submit-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(var(--accent-color-rgb, 0, 113, 227), 0.3);
        }

        .submit-button:active {
            transform: translateY(0);
        }

        /* å³ä¾§å¡ç‰‡é¢„è§ˆåŒºåŸŸ */
        .card-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-width: 0;
        }

        .note-card {
            width: 100%;
            max-width: 500px;
            background: var(--card-gradient);
            border-radius: 20px;
            padding: var(--spacing-lg);
            box-shadow: 0 8px 30px var(--shadow-color);
            position: relative;
            overflow: hidden;
            transition: all var(--transition-speed) ease;
            border: 1px solid var(--border-color);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            transform: translateY(0);
        }

        .note-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px var(--shadow-color);
        }

        /* ä¼˜åŒ–å¡ç‰‡æ–‡å­—æ’ç‰ˆ */
        .note-content {
            font-size: var(--card-font-size); /* ç•¥å¾®å°ä¸€ç‚¹çš„å­—ä½“å¤§å° */
            line-height: var(--card-line-height); /* å¢åŠ è¡Œé«˜ï¼Œæä¾›æ›´å¥½çš„å‘¼å¸æ„Ÿ */
            letter-spacing: var(--card-letter-spacing); /* å¢åŠ å­—é—´è· */
            margin-bottom: var(--spacing-lg);
            white-space: pre-wrap;
            /* å­—ä½“å°†åœ¨JavaScriptä¸­æ ¹æ®å†…å®¹åŠ¨æ€è®¾ç½® */
            
            /* å¢åŠ æ®µè½é—´è· */
            text-align: justify;
            text-justify: inter-word;
            
            /* ä¼˜åŒ–æ–‡æœ¬æ¸²æŸ“ */
            text-rendering: optimizeLegibility;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* æ®µè½æ ·å¼ - æ–°å¢ */
        .note-content p {
            margin-bottom: 0.8em;
        }

        .note-content p:first-child {
            margin-top: 0;
        }

        .note-content p:last-child {
            margin-bottom: 0;
        }

        /* æ®µè½é¦–è¡Œç¼©è¿› - æ–°å¢ */
        .note-content p {
            text-indent: var(--paragraph-indent);
        }

        /* é’ˆå¯¹ä¸åŒè¯­è¨€çš„ç‰¹å®šæ’ç‰ˆè°ƒæ•´ */
        .note-content.en-text {
            /* è‹±æ–‡ç‰¹å®šæ’ç‰ˆ */
            font-weight: 400;
            word-spacing: 0.05em; /* è‹±æ–‡å•è¯é—´è·å¾®è°ƒ */
        }

        .note-content.cn-text {
            /* ä¸­æ–‡ç‰¹å®šæ’ç‰ˆ */
            font-weight: 300;
            line-height: 1.9; /* ä¸­æ–‡éœ€è¦ç¨å¾®æ›´å¤§çš„è¡Œé«˜ */
            letter-spacing: 0.05em; /* ä¸­æ–‡éœ€è¦æ›´å¤§çš„å­—é—´è· */
        }

        .card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: var(--spacing-md);
            color: var(--text-secondary);
            font-size: 0.85rem; /* ç•¥å¾®å°ä¸€ç‚¹çš„é¡µè„šå­—ä½“ */
            letter-spacing: 0.01em; /* è½»å¾®å¢åŠ å­—é—´è· */
        }

        /* æ›´æ–°å¯¼å‡ºæŒ‰é’®æ ·å¼ */
        .export-buttons {
            display: flex;
            gap: var(--spacing-sm);
            margin-top: var(--spacing-md);
        }

        .export-button {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: var(--spacing-xs) var(--spacing-md);
            border-radius: 20px;
            font-weight: 500;
            cursor: pointer;
            transition: all var(--transition-speed) ease;
            display: flex;
            align-items: center;
            gap: 0.5em;
        }

        .export-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(var(--accent-color-rgb, 0, 113, 227), 0.2);
        }

        .export-button:active {
            transform: translateY(0);
        }

        .export-button i {
            font-size: 1.1em;
        }

        /* å¯¼å‡ºè¿›åº¦æŒ‡ç¤ºå™¨ */
        .export-progress {
            display: none;
            margin-top: var(--spacing-sm);
            color: var(--text-secondary);
            font-size: 0.9rem;
            text-align: center;
        }

        /* Loading animation */
        .loader {
            display: none;
            width: 40px;
            height: 40px;
            border: 3px solid rgba(var(--accent-color-rgb, 0, 113, 227), 0.3);
            border-radius: 50%;
            border-top-color: var(--accent-color);
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* Micro-animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeIn 0.6s ease forwards;
        }

        /* ç®€å•å›¾æ ‡å­—ä½“ */
        .icon {
            display: inline-block;
            width: 1em;
            height: 1em;
            position: relative;
        }

        .icon-download::before {
            content: 'â†“';
        }

        .icon-copy::before {
            content: 'â˜';
        }

        /* æ–°å¢é¡µè„šæ ·å¼ */
        .footer {
            background-color: var(--footer-bg);
            color: var(--footer-text);
            padding: var(--spacing-md) 0;
            text-align: center;
            font-size: 0.85rem;
            margin-top: var(--spacing-xl);
            flex-shrink: 0;
        }

        .footer a {
            color: var(--footer-text);
            text-decoration: none;
            transition: color var(--transition-speed) ease;
        }

        .footer a:hover {
            color: var(--accent-color);
            text-decoration: underline;
        }

        /* Media queries - å“åº”å¼å¤„ç† */
        @media (max-width: 900px) {
            .main-content {
                flex-direction: column;
            }

            .note-card {
                margin-top: var(--spacing-lg);
            }
            
            .export-buttons {
                flex-direction: column;
            }
        }

        @media (max-width: 600px) {
            .note-card {
                padding: var(--spacing-md);
            }

            .header h1 {
                font-size: 1.7rem;
            }

            .note-content {
                font-size: calc(var(--card-font-size) - 0.05rem); /* ç§»åŠ¨è®¾å¤‡ä¸Šç¨å¾®è°ƒå°å­—ä½“ */
            }
            
            .language-selector span {
                display: none; /* åœ¨å°å±å¹•ä¸Šéšè—æ–‡å­—æ ‡ç­¾ */
            }
            
            .site-logo span:not(.emoji) {
                display: none; /* åœ¨å°å±å¹•ä¸Šåªæ˜¾ç¤ºemoji */
            }
        }

        /* ç©ºå¡ç‰‡æç¤ºæ ·å¼ */
        .empty-card-message {
            color: var(--text-secondary);
            text-align: center;
            font-style: italic;
            padding: var(--spacing-md);
        }

        /* å¢åŠ è¯­è¨€æç¤ºæ ·å¼ */
        .language-indicator {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-top: var(--spacing-xs);
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .language-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: var(--accent-color);
        }
    </style>
</head>
<body>
    <!-- é¡¶éƒ¨å¯¼èˆªæ  - æ–°å¢ -->
    <div class="top-nav">
        <!-- å·¦ä¾§Logo - æ–°å¢ -->
        <div class="site-logo">
            <span class="emoji">ğŸ“š</span>
            <span id="logo-text">Minimalism Note Card Generator</span>
        </div>
        
        <div class="language-selector">
            <span id="language-label">Language:</span>
            <select id="site-language">
                <option value="en">English</option>
                <option value="zh">ä¸­æ–‡</option>
            </select>
        </div>
    </div>
    
    <div class="main-wrapper">
        <div class="container">
            <div class="header fade-in">
                <h1 id="page-title">Minimalism Note Card Generator</h1>
                <p id="page-subtitle">Transform your thoughts into beautifully designed cards</p>
            </div>

            <div class="theme-switcher fade-in">
                <button class="theme-button active" data-theme="light" id="theme-light">Light</button>
                <button class="theme-button" data-theme="dark" id="theme-dark">Dark</button>
                <button class="theme-button" data-theme="warm" id="theme-warm">Warm</button>
            </div>

            <!-- é‡æ–°è®¾è®¡ä¸ºåˆ†å±å¸ƒå±€ -->
            <div class="main-content">
                <!-- å·¦ä¾§è¾“å…¥åŒºåŸŸ -->
                <div id="input-section" class="input-section fade-in">
                    <form class="input-form" id="note-form">
                        <div class="input-group">
                            <label for="nickname" id="nickname-label">Your Nickname</label>
                            <input type="text" id="nickname" class="input-field" placeholder="Enter your nickname" required>
                        </div>
                        <div class="input-group">
                            <label for="note-content" id="note-label">Your Note</label>
                            <textarea id="note-content" class="input-field" placeholder="Enter your reading notes, quotes, or extracts..." required></textarea>
                            <div class="language-indicator">
                                <span class="language-dot"></span>
                                <span id="language-text">Auto-detected language: English</span>
                            </div>
                        </div>
                        <button type="submit" class="submit-button" id="submit-button">Create Card</button>
                    </form>
                </div>

                <!-- å³ä¾§å¡ç‰‡é¢„è§ˆåŒºåŸŸ -->
                <div id="card-section" class="card-section">
                    <div class="note-card" id="note-card">
                        <div id="note-text" class="note-content empty-card-message">Your note will appear here as you type...</div>
                        <div class="card-footer">
                            <div id="card-author">Your name</div>
                            <div id="card-date"></div>
                        </div>
                    </div>
                    
                    <!-- å¯¼å‡ºæŒ‰é’®ç»„ -->
                    <div class="export-buttons">
                        <button class="export-button" id="download-button">
                            <span class="icon icon-download"></span> <span id="download-text">Download as PNG</span>
                        </button>
                        <button class="export-button" id="copy-button">
                            <span class="icon icon-copy"></span> <span id="copy-text">Copy to Clipboard</span>
                        </button>
                    </div>
                    
                    <!-- å¯¼å‡ºè¿›åº¦æŒ‡ç¤ºå™¨ -->
                    <div class="export-progress" id="export-progress">Processing...</div>
                </div>
            </div>

            <div class="loader" id="loader"></div>
        </div>
    </div>
    
    <!-- é¡µè„š - æ–°å¢ -->
    <footer class="footer">
        <a href="http://www.zeroxzhang.cc" target="_blank" id="copyright">
            Copyright Â© 2022 - 2025 ZeroxZhang.cc All Rights Reserved
        </a>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM elements
            const themeButtons = document.querySelectorAll('.theme-button');
            const noteForm = document.getElementById('note-form');
            const noteTextarea = document.getElementById('note-content');
            const nicknameInput = document.getElementById('nickname');
            const noteText = document.getElementById('note-text');
            const cardAuthor = document.getElementById('card-author');
            const cardDate = document.getElementById('card-date');
            const downloadButton = document.getElementById('download-button');
            const copyButton = document.getElementById('copy-button');
            const loader = document.getElementById('loader');
            const languageText = document.getElementById('language-text');
            const exportProgress = document.getElementById('export-progress');
            const noteCard = document.getElementById('note-card');
            const siteLanguage = document.getElementById('site-language');
            const logoText = document.getElementById('logo-text');
            
            // ç¿»è¯‘æ•°æ®
            const translations = {
                en: {
                    pageTitle: "Minimalism Note Card Generator",
                    pageSubtitle: "Transform your thoughts into beautifully designed cards",
                    themeLight: "Light",
                    themeDark: "Dark",
                    themeWarm: "Warm",
                    nicknameLabel: "Your Nickname",
                    noteLabel: "Your Note",
                    submitButton: "Create Card",
                    downloadText: "Download as PNG",
                    copyText: "Copy to Clipboard",
                    languageLabel: "Language:",
                    emptyCard: "Your note will appear here as you type...",
                    yourName: "Your name",
                    languageDetectedEN: "Auto-detected language: English",
                    languageDetectedCN: "Auto-detected language: Chinese",
                    processing: "Processing...",
                    copyingText: "Copying to clipboard...",
                    copiedText: "Copied to clipboard!",
                    creatingImage: "Creating image...",
                    copyFailed: "Copy failed. Try downloading instead.",
                    nicknamePlaceholder: "Enter your nickname",
                    notePlaceholder: "Enter your reading notes, quotes, or extracts...",
                    cardCreated: "Card created successfully! You can now download or copy it.",
                    emptyContentAlert: "Please enter some content before exporting.",
                    copyright: "Copyright Â© 2022 - 2025 ZeroxZhang.cc All Rights Reserved",
                    logoText: "Minimalism Note Card Generator"
                },
                zh: {
                    pageTitle: "æç®€ç¬”è®°å¡ç‰‡ç”Ÿæˆå™¨",
                    pageSubtitle: "å°†æ‚¨çš„æƒ³æ³•è½¬åŒ–ä¸ºç²¾ç¾è®¾è®¡çš„å¡ç‰‡",
                    themeLight: "æ˜äº®",
                    themeDark: "æš—é»‘",
                    themeWarm: "æ¸©æš–",
                    nicknameLabel: "æ‚¨çš„æ˜µç§°",
                    noteLabel: "æ‚¨çš„ç¬”è®°",
                    submitButton: "åˆ›å»ºå¡ç‰‡",
                    downloadText: "ä¸‹è½½ä¸ºPNG",
                    copyText: "å¤åˆ¶åˆ°å‰ªè´´æ¿",
                    languageLabel: "è¯­è¨€ï¼š",
                    emptyCard: "æ‚¨çš„ç¬”è®°å°†åœ¨æ‚¨è¾“å…¥æ—¶æ˜¾ç¤ºåœ¨è¿™é‡Œ...",
                    yourName: "æ‚¨çš„æ˜µç§°",
                    languageDetectedEN: "è‡ªåŠ¨æ£€æµ‹è¯­è¨€ï¼šè‹±æ–‡",
                    languageDetectedCN: "è‡ªåŠ¨æ£€æµ‹è¯­è¨€ï¼šä¸­æ–‡",
                    processing: "å¤„ç†ä¸­...",
                    copyingText: "æ­£åœ¨å¤åˆ¶åˆ°å‰ªè´´æ¿...",
                    copiedText: "å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼",
                    creatingImage: "æ­£åœ¨åˆ›å»ºå›¾ç‰‡...",
                    copyFailed: "å¤åˆ¶å¤±è´¥ï¼Œè¯·å°è¯•ä¸‹è½½ã€‚",
                    nicknamePlaceholder: "è¯·è¾“å…¥æ‚¨çš„æ˜µç§°",
                    notePlaceholder: "è¯·è¾“å…¥æ‚¨çš„é˜…è¯»ç¬”è®°ã€å¼•ç”¨æˆ–æ‘˜å½•...",
                    cardCreated: "å¡ç‰‡åˆ›å»ºæˆåŠŸï¼æ‚¨ç°åœ¨å¯ä»¥ä¸‹è½½æˆ–å¤åˆ¶å®ƒã€‚",
                    emptyContentAlert: "è¯·åœ¨å¯¼å‡ºå‰è¾“å…¥ä¸€äº›å†…å®¹ã€‚",
                    copyright: "Copyright Â© 2022 - 2025 ZeroxZhang.cc All Rights Reserved",
                    logoText: "æç®€ç¬”è®°å¡ç‰‡ç”Ÿæˆå™¨"
                }
            };
            
            // æ›´æ–°UIè¯­è¨€
            function updateLanguage(lang) {
                const t = translations[lang];
                
                // æ›´æ–°é¡µé¢æ–‡æœ¬
                document.getElementById('page-title').textContent = t.pageTitle;
                document.getElementById('page-subtitle').textContent = t.pageSubtitle;
                document.getElementById('theme-light').textContent = t.themeLight;
                document.getElementById('theme-dark').textContent = t.themeDark;
                document.getElementById('theme-warm').textContent = t.themeWarm;
                document.getElementById('nickname-label').textContent = t.nicknameLabel;
                document.getElementById('note-label').textContent = t.noteLabel;
                document.getElementById('submit-button').textContent = t.submitButton;
                document.getElementById('download-text').textContent = t.downloadText;
                document.getElementById('copy-text').textContent = t.copyText;
                document.getElementById('language-label').textContent = t.languageLabel;
                document.getElementById('copyright').textContent = t.copyright;
                logoText.textContent = t.logoText;
                
                // æ›´æ–°placeholder
                nicknameInput.placeholder = t.nicknamePlaceholder;
                noteTextarea.placeholder = t.notePlaceholder;
                
                // æ›´æ–°å…¶ä»–åŠ¨æ€å†…å®¹
                if (noteText.classList.contains('empty-card-message')) {
                    noteText.textContent = t.emptyCard;
                }
                
                if (cardAuthor.textContent === 'Your name' || cardAuthor.textContent === 'æ‚¨çš„æ˜µç§°') {
                    cardAuthor.textContent = t.yourName;
                }
                
                // æ›´æ–°è¯­è¨€æ£€æµ‹æ–‡æœ¬
                if (languageText.textContent.includes('English') || languageText.textContent.includes('è‹±æ–‡')) {
                    languageText.textContent = t.languageDetectedEN;
                } else if (languageText.textContent.includes('Chinese') || languageText.textContent.includes('ä¸­æ–‡')) {
                    languageText.textContent = t.languageDetectedCN;
                }
                
                // ä¿å­˜è¯­è¨€é€‰æ‹©
                localStorage.setItem('site-language', lang);
            }
            
            // è¯­è¨€åˆ‡æ¢äº‹ä»¶ç›‘å¬
            siteLanguage.addEventListener('change', function() {
                updateLanguage(this.value);
            });
            
            // ä»æœ¬åœ°å­˜å‚¨åŠ è½½è¯­è¨€è®¾ç½®
            const savedLanguage = localStorage.getItem('site-language') || 'en';
            siteLanguage.value = savedLanguage;
            updateLanguage(savedLanguage);
            
            // Set current date on load
            const date = new Date();
            const formattedDate = new Intl.DateTimeFormat('en-US', {
                month: 'short',
                day: 'numeric',
                year: 'numeric'
            }).format(date);
            cardDate.textContent = formattedDate;
            
            // Theme switching
            themeButtons.forEach(button => {
                button.addEventListener('click', () => {
                    // Remove active class from all buttons
                    themeButtons.forEach(btn => btn.classList.remove('active'));
                    
                    // Add active class to clicked button
                    button.classList.add('active');
                    
                    // Set theme
                    document.documentElement.setAttribute('data-theme', button.getAttribute('data-theme'));
                });
            });
            
            // æ£€æµ‹æ–‡æœ¬æ˜¯å¦åŒ…å«ä¸­æ–‡å­—ç¬¦
            function containsChinese(text) {
                return /[\u4e00-\u9fa5]/.test(text);
            }
            
            // æ ¼å¼åŒ–æ®µè½ï¼Œæ·»åŠ é¦–è¡Œç¼©è¿›
            function formatContentWithIndent(content) {
                // å¦‚æœå†…å®¹ä¸ºç©ºï¼Œè¿”å›ç©ºå­—ç¬¦ä¸²
                if (!content.trim()) return '';
                
                // åˆ†å‰²æˆæ®µè½
                const paragraphs = content.split(/\n\s*\n|\n{2,}/);
                
                // å°†æ¯ä¸ªæ®µè½åŒ…è£¹åœ¨<p>æ ‡ç­¾ä¸­
                const formattedParagraphs = paragraphs.map(paragraph => {
                    // å¿½ç•¥ç©ºæ®µè½
                    if (!paragraph.trim()) return '';
                    
                    // å¤„ç†å•è¡Œæ®µè½ï¼ˆå¯èƒ½åŒ…å«å•ä¸ªæ¢è¡Œç¬¦ï¼‰
                    const lines = paragraph.split(/\n/);
                    const processedParagraph = lines.join('<br>');
                    
                    return `<p>${processedParagraph}</p>`;
                });
                
                // è¿æ¥æ‰€æœ‰æ®µè½
                return formattedParagraphs.join('');
            }
            
            // å®æ—¶æ›´æ–°é¢„è§ˆå¡ç‰‡å’Œè¯­è¨€æ£€æµ‹
            noteTextarea.addEventListener('input', function() {
                const content = this.value;
                const currentLang = siteLanguage.value;
                const t = translations[currentLang];
                
                // æ›´æ–°å¡ç‰‡å†…å®¹
                if (content.trim() === '') {
                    noteText.innerHTML = t.emptyCard;
                    noteText.classList.add('empty-card-message');
                    // é‡ç½®è¯­è¨€ç±»
                    noteText.classList.remove('en-text', 'cn-text');
                } else {
                    const formattedHTML = formatContentWithIndent(content);
                    noteText.innerHTML = formattedHTML;
                    noteText.classList.remove('empty-card-message');
                    
                    // æ£€æµ‹è¯­è¨€å¹¶è®¾ç½®å­—ä½“ä¸ç‰¹å®šè¯­è¨€ç±»
                    if (containsChinese(content)) {
                        noteText.style.fontFamily = 'var(--font-cn)';
                        languageText.textContent = t.languageDetectedCN;
                        noteText.classList.remove('en-text');
                        noteText.classList.add('cn-text');
                    } else {
                        noteText.style.fontFamily = 'var(--font-en)';
                        languageText.textContent = t.languageDetectedEN;
                        noteText.classList.remove('cn-text');
                        noteText.classList.add('en-text');
                    }
                }
                
                // è°ƒæ•´å¡ç‰‡é«˜åº¦
                noteCard.style.minHeight = Math.max(150, content.length / 3) + 'px';
            });
            
            // å®æ—¶æ›´æ–°ä½œè€…åç§°
            nicknameInput.addEventListener('input', function() {
                const nickname = this.value;
                const currentLang = siteLanguage.value;
                const t = translations[currentLang];
                
                if (nickname.trim() === '') {
                    cardAuthor.textContent = t.yourName;
                } else {
                    cardAuthor.textContent = nickname;
                }
            });
            
            // Form submission - ä¿ç•™å®Œæ•´è¡¨å•æäº¤åŠŸèƒ½
            noteForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Show loader briefly to indicate processing
                loader.style.display = 'block';
                
                // Get form values
                const nickname = nicknameInput.value;
                const content = noteTextarea.value;
                
                // Simulate processing delay
                setTimeout(() => {
                    // Hide loader
                    loader.style.display = 'none';
                    
                    // Alert user that card is created
                    const currentLang = siteLanguage.value;
                    alert(translations[currentLang].cardCreated);
                }, 500);
            });
            
            // å°†å¡ç‰‡å¯¼å‡ºä¸ºPNGå›¾ç‰‡å¹¶ä¸‹è½½
            downloadButton.addEventListener('click', function() {
                const currentLang = siteLanguage.value;
                const t = translations[currentLang];
                
                // æ£€æŸ¥å¡ç‰‡æ˜¯å¦ä¸ºç©º
                if (noteTextarea.value.trim() === '') {
                    alert(t.emptyContentAlert);
                    return;
                }
                
                // æ˜¾ç¤ºè¿›åº¦æŒ‡ç¤ºå™¨
                exportProgress.textContent = t.creatingImage;
                exportProgress.style.display = 'block';
                
                // ä½¿ç”¨html2canvasæ•è·å¡ç‰‡
                html2canvas(noteCard, {
                    scale: 2, // ä½¿ç”¨2å€æ¯”ä¾‹æé«˜æ¸…æ™°åº¦
                    useCORS: true,
                    backgroundColor: null // é€æ˜èƒŒæ™¯
                }).then(canvas => {
                    // è½¬æ¢ä¸ºå›¾ç‰‡å¹¶ä¸‹è½½
                    const imgData = canvas.toDataURL('image/png');
                    const link = document.createElement('a');
                    link.href = imgData;
                    
                    // åˆ›å»ºæ–‡ä»¶å (ä½¿ç”¨æ˜µç§°ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä½¿ç”¨æ—¥æœŸ)
                    const nickname = nicknameInput.value.trim() || 'note';
                    const fileName = `${nickname}_card_${new Date().toISOString().slice(0,10)}.png`;
                    
                    link.download = fileName;
                    link.click();
                    
                    // éšè—è¿›åº¦æŒ‡ç¤ºå™¨
                    exportProgress.style.display = 'none';
                }).catch(error => {
                    console.error('Error exporting image:', error);
                    exportProgress.textContent = 'Error creating image. Please try again.';
                    setTimeout(() => {
                        exportProgress.style.display = 'none';
                    }, 3000);
                });
            });
            
            // å°†å¡ç‰‡å¤åˆ¶åˆ°å‰ªè´´æ¿
            copyButton.addEventListener('click', function() {
                const currentLang = siteLanguage.value;
                const t = translations[currentLang];
                
                // æ£€æŸ¥å¡ç‰‡æ˜¯å¦ä¸ºç©º
                if (noteTextarea.value.trim() === '') {
                    alert(t.emptyContentAlert);
                    return;
                }
                
                // æ˜¾ç¤ºè¿›åº¦æŒ‡ç¤ºå™¨
                exportProgress.textContent = t.copyingText;
                exportProgress.style.display = 'block';
                
                // ä½¿ç”¨html2canvasæ•è·å¡ç‰‡
                html2canvas(noteCard, {
                    scale: 2, // ä½¿ç”¨2å€æ¯”ä¾‹æé«˜æ¸…æ™°åº¦
                    useCORS: true,
                    backgroundColor: null // é€æ˜èƒŒæ™¯
                }).then(canvas => {
                    // å¤„ç†Canvasæ•°æ®
                    canvas.toBlob(function(blob) {
                        try {
                            // å°è¯•ä½¿ç”¨ç°ä»£å‰ªè´´æ¿API
                            const clipboardItem = new ClipboardItem({ 'image/png': blob });
                            navigator.clipboard.write([clipboardItem]).then(() => {
                                exportProgress.textContent = t.copiedText;
                                setTimeout(() => {
                                    exportProgress.style.display = 'none';
                                }, 2000);
                            }).catch(err => {
                                // ç°ä»£APIå¤±è´¥æ—¶å›é€€åˆ°ä¼ ç»Ÿæ–¹æ³•
                                fallbackCopy(canvas, t);
                            });
                        } catch (e) {
                            // å¦‚æœClipboardItemä¸å¯ç”¨ï¼Œä½¿ç”¨å›é€€æ–¹æ³•
                            fallbackCopy(canvas, t);
                        }
                    });
                }).catch(error => {
                    console.error('Error copying image:', error);
                    exportProgress.textContent = 'Error copying image. Please try again.';
                    setTimeout(() => {
                        exportProgress.style.display = 'none';
                    }, 3000);
                });
            });
            
            // å¤åˆ¶å›¾ç‰‡çš„å›é€€æ–¹æ³•
            function fallbackCopy(canvas, t) {
                // åœ¨é¡µé¢ä¸Šåˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„imgå…ƒç´ 
                const img = document.createElement('img');
                img.src = canvas.toDataURL('image/png');
                
                // ä¸´æ—¶æ·»åŠ åˆ°æ–‡æ¡£ä¸­ï¼Œé€‰æ‹©å®ƒï¼Œç„¶åå°è¯•å¤åˆ¶
                img.style.position = 'fixed';
                img.style.opacity = '0';
                document.body.appendChild(img);
                
                // åˆ›å»ºä¸€ä¸ªèŒƒå›´å’Œé€‰æ‹©
                const range = document.createRange();
                range.selectNode(img);
                const selection = window.getSelection();
                selection.removeAllRanges();
                selection.addRange(range);
                
                try {
                    // å°è¯•ä½¿ç”¨document.execCommandå¤åˆ¶
                    const successful = document.execCommand('copy');
                    if (successful) {
                        exportProgress.textContent = t.copiedText;
                    } else {
                        exportProgress.textContent = t.copyFailed;
                    }
                } catch (err) {
                    exportProgress.textContent = t.copyFailed;
                }
                
                // æ¸…ç†
                selection.removeAllRanges();
                document.body.removeChild(img);
                
                setTimeout(() => {
                    exportProgress.style.display = 'none';
                }, 2000);
            }
            
            // Add random floating shapes for background interest
            function createBackgroundElements() {
                const container = document.body;
                const numElements = 5;
                
                for (let i = 0; i < numElements; i++) {
                    const element = document.createElement('div');
                    element.style.position = 'fixed';
                    element.style.width = `${Math.random() * 200 + 50}px`;
                    element.style.height = element.style.width;
                    element.style.borderRadius = '50%';
                    element.style.background = `radial-gradient(circle, var(--accent-color) 0%, transparent 70%)`;
                    element.style.opacity = '0.05';
                    element.style.left = `${Math.random() * 100}vw`;
                    element.style.top = `${Math.random() * 100}vh`;
                    element.style.zIndex = '-1';
                    element.style.filter = 'blur(40px)';
                    element.style.transform = 'translate(-50%, -50%)';
                    element.style.transition = 'all 10s ease-in-out';
                    
                    container.appendChild(element);
                    
                    // Animate the elements
                    setInterval(() => {
                        element.style.left = `${Math.random() * 100}vw`;
                        element.style.top = `${Math.random() * 100}vh`;
                    }, 10000);
                }
            }
            
            createBackgroundElements();
        });
    </script>
</body>
</html>
